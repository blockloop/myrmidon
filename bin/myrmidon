#!/usr/bin/env node

var lib = require('../lib/myrmidon.js'),
	fs = require('fs'),
	path = require('path'),
	_ = require('lodash');

var opts = require("nomnom")
	.option('version', {
		abbr: 'v',
		flag: true,
		help: 'print version and exit',
		callback: function() {
			return require('../package.json').version;
		}
	})
	.option('add-playlist', {
		abbr: 'p',
		flag: false,
		help: 'A playlist by ID',
		callback: function(playlistId) {
			lib.playlistId(playlistId);
		}
	})
	.option('config', {
		abbr: 'c',
		default: 'config.json',
		help: 'Use this config file'
	})
	.option('feeds-by-user', {
		flag: false,
		help: 'Print all feeds for a given username',
		callback: function(username) {
			lib.getFeedsForUser(username,function(items){
				_.forEach(items, function(item){
					console.log(JSON.stringify(item,null,2));
				});
			});
		}
	})
	.parse();